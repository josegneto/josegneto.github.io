<pre style='color:#000000;background:#ffffff;'><span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>IRLibAll.h</span><span style='color:#800000; '>></span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>include </span><span style='color:#800000; '>&lt;</span><span style='color:#40015a; '>Servo.h</span><span style='color:#800000; '>></span><span style='color:#004a43; '> </span>

<span style='color:#696969; '>// You will have to set these values depending on the protocol</span>
<span style='color:#696969; '>// and remote codes that you are using. These are For the Adafruit</span>
<span style='color:#696969; '>// Mini Remote</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> MY_PROTOCOL NEC</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> RIGHT_ARROW   0x1FE40BF </span><span style='color:#696969; '>//Move several clockwise</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> LEFT_ARROW    0x1FE807F </span><span style='color:#696969; '>//Move servo counterclockwise</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> SELECT_BUTTON 0x1FE609F </span><span style='color:#696969; '>//Center the servo </span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> UP_ARROW      0x1FEA05F </span><span style='color:#696969; '>//Increased number of degrees servo moves</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> DOWN_ARROW    0x1FE20DF </span><span style='color:#696969; '>//Decrease number of degrees servo moves</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_0 0x1FEE01F  </span><span style='color:#696969; '>//Pushing buttons 0-9 moves to fixed positions</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_1 0x1FE50AF  </span><span style='color:#696969; '>// each 20 degrees greater</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_2 0x1FED827</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_3 0x1FEF807</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_4 0x1FE30CF</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_5 0x1FEB04F</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_6 0x1FE708F</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_7 0x1FE00FF</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_8 0x1FEF00F</span>
<span style='color:#004a43; '>#</span><span style='color:#004a43; '>define</span><span style='color:#004a43; '> BUTTON_9 0x1FE9867</span>

IRrecv myReceiver<span style='color:#808030; '>(</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#696969; '>//pin number for the receiver</span>
IRdecode myDecoder<span style='color:#800080; '>;</span>

Servo myServo<span style='color:#800080; '>;</span>  <span style='color:#696969; '>// create servo object to control a servo </span>
int16_t pos<span style='color:#800080; '>;</span>         <span style='color:#696969; '>// variable to store the servo position </span>
int16_t Speed<span style='color:#800080; '>;</span>       <span style='color:#696969; '>// Number of degrees to move each time a left/right button is pressed</span>
uint32_t Previous<span style='color:#800080; '>;</span><span style='color:#696969; '>//handles NEC repeat codes</span>

<span style='color:#800000; font-weight:bold; '>void</span> setup<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span> 
  myServo<span style='color:#808030; '>.</span>attach<span style='color:#808030; '>(</span><span style='color:#008c00; '>9</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>      <span style='color:#696969; '>// attaches the servo on pin 9 to the servo object </span>
  pos <span style='color:#808030; '>=</span> <span style='color:#008c00; '>90</span><span style='color:#800080; '>;</span>               <span style='color:#696969; '>// start at midpoint 90 degrees</span>
  Speed <span style='color:#808030; '>=</span> <span style='color:#008c00; '>3</span><span style='color:#800080; '>;</span>              <span style='color:#696969; '>// servo moves 3 degrees each time left/right is pushed</span>
  myServo<span style='color:#808030; '>.</span>write<span style='color:#808030; '>(</span>pos<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>     <span style='color:#696969; '>// Set initial position</span>
  myReceiver<span style='color:#808030; '>.</span>enableIRIn<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#696969; '>// Start the receiver</span>
<span style='color:#800080; '>}</span> 
  
<span style='color:#800000; font-weight:bold; '>void</span> loop<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> 
<span style='color:#800080; '>{</span> 
    <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>myReceiver<span style='color:#808030; '>.</span>getResults<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
       myDecoder<span style='color:#808030; '>.</span>decode<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
       <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>myDecoder<span style='color:#808030; '>.</span>protocolNum<span style='color:#808030; '>=</span><span style='color:#808030; '>=</span>MY_PROTOCOL<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
         <span style='color:#800000; font-weight:bold; '>if</span><span style='color:#808030; '>(</span>myDecoder<span style='color:#808030; '>.</span>value<span style='color:#808030; '>=</span><span style='color:#808030; '>=</span><span style='color:#008000; '>0xFFFFFFFF</span><span style='color:#808030; '>)</span>
           myDecoder<span style='color:#808030; '>.</span>value<span style='color:#808030; '>=</span>Previous<span style='color:#800080; '>;</span>
         <span style='color:#800000; font-weight:bold; '>switch</span><span style='color:#808030; '>(</span>myDecoder<span style='color:#808030; '>.</span>value<span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>LEFT_ARROW</span><span style='color:#e34adc; '>:</span>    pos<span style='color:#808030; '>=</span><span style='color:#603000; '>min</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>180</span><span style='color:#808030; '>,</span>pos<span style='color:#808030; '>+</span>Speed<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>RIGHT_ARROW</span><span style='color:#e34adc; '>:</span>   pos<span style='color:#808030; '>=</span><span style='color:#603000; '>max</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span>pos<span style='color:#808030; '>-</span>Speed<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>SELECT_BUTTON</span><span style='color:#e34adc; '>:</span> pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>90</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>UP_ARROW</span><span style='color:#e34adc; '>:</span>      Speed<span style='color:#808030; '>=</span><span style='color:#603000; '>min</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>10</span><span style='color:#808030; '>,</span> Speed<span style='color:#808030; '>+</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>DOWN_ARROW</span><span style='color:#e34adc; '>:</span>    Speed<span style='color:#808030; '>=</span><span style='color:#603000; '>max</span><span style='color:#808030; '>(</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>,</span> Speed<span style='color:#808030; '>-</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_0</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_1</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>1</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_2</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>2</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_3</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>3</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_4</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>4</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_5</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>5</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_6</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>6</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_7</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>7</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_8</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>8</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
            <span style='color:#800000; font-weight:bold; '>case </span><span style='color:#7d0045; '>BUTTON_9</span><span style='color:#e34adc; '>:</span>      pos<span style='color:#808030; '>=</span><span style='color:#008c00; '>9</span><span style='color:#808030; '>*</span><span style='color:#008c00; '>20</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>break</span><span style='color:#800080; '>;</span>
         <span style='color:#800080; '>}</span>
         myServo<span style='color:#808030; '>.</span>write<span style='color:#808030; '>(</span>pos<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span> <span style='color:#696969; '>// tell servo to go to position in variable 'pos' </span>
         Previous<span style='color:#808030; '>=</span>myDecoder<span style='color:#808030; '>.</span>value<span style='color:#800080; '>;</span>
       <span style='color:#800080; '>}</span>
       myReceiver<span style='color:#808030; '>.</span>enableIRIn<span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>